/**
 * Jonathan Torres Portfolio
 * Version: 1.0.0
 * Author: Jonathan Torres | jonathantorres41@gmail.com
 * Compiled on 2014-01-18
 */

!function(a){function b(){}var c,d,e,f,g,h,i,j,k,l,m,n;b.prototype.init=function(){r(),c.addClass("viewedSection"),h.css({display:"block"}),f.css({display:"none"}),l.text(""),i.removeClass("error"),j.removeClass("error"),k.removeClass("error"),q(),g=new TimelineMax,g.from(d,1,{opacity:0,ease:Expo.easeOut}),g.from(e,1,{opacity:0,marginLeft:"-60px",ease:Expo.easeOut},"-=0.8"),g.from(h,1,{opacity:0,ease:Expo.easeOut},"-=0.8"),i.on("blur",function(){o($(this),!1)}),k.on("blur",function(){o($(this),!1)}),j.on("blur",function(){o($(this),!0)}),j.on("keypress",function(){o($(this),!0)}),n.on("click",function(a){a.preventDefault(),p()}),$(a).on("keyup",function(a){13===a.keyCode&&p()}),m.on("click",function(a){a.preventDefault(),f.fadeOut("normal",function(){q(),h.fadeIn()})})};var o=function(a,b){var c=a.val();if(""===c)return l.text("All fields are required."),a.addClass("error"),!1;if(b){var d=/^([a-zA-Z0-9])(([a-zA-Z0-9])*([\._\+-])*([a-zA-Z0-9]))*@(([a-zA-Z0-9\-])+(\.))+([a-zA-Z]{2,4})+$/;if(-1===c.search(d))return l.text("Invalid email."),a.addClass("error"),!1}return i.hasClass("error")===!1&&j.hasClass("error")===!1&&k.hasClass("error")===!1&&l.text(""),a.removeClass("error"),!0},p=function(){var a=o(i,!1),b=o(j,!0),c=o(k,!1);if(a===!1||c===!1)return l.text("All fields are required."),!1;if(b===!1)return l.text("Invalid email."),!1;l.text(""),i.removeClass("error"),j.removeClass("error"),k.removeClass("error");var d=i.val(),e=j.val(),g=k.val();$.ajax({type:"POST",url:"php/submit_contact_form.php",data:{un:d,ue:e,um:g},success:function(){h.fadeOut("normal",function(){f.fadeIn()})},error:function(){console.log("error!")}})},q=function(){i.val(""),j.val(""),k.val("")},r=function(){c=$("#contact"),d=$(".title"),e=$(".summary"),f=$("#success"),h=$("#contact_form"),i=$("#username"),j=$("#email"),k=$("#message"),l=$(".error_feedback"),n=$("#send"),m=$("#ok")};a.Contact=b}(window),$(window).on("load",function(){var a=new Preloader;a.init(),Utils.getJSONData()}),function(a){function b(){}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;b.prototype.init=function(){c=this,w(),d.addClass("viewedSection"),f=e.find(".work"),g=f.sort(function(){return.5-Math.random()}),i.is(":visible")&&(u(),v()),TweenMax.staggerFrom(g,2,{opacity:0,ease:Expo.easeOut},.2),e.find("a").on("click",s)};var s=function(a){a.preventDefault();var b=$(a.currentTarget),d=parseInt(b.parent().data("id"),10),e=c.getWorkData(d);hasher.setHash("portfolio/"+Utils.slug(e.name))};b.prototype.getWorkData=function(a){for(var b,c,d=0;d<this.worksData.length;d++)c="number"==typeof a?parseInt(this.worksData[d].id,10):Utils.slug(this.worksData[d].name),a===c&&(b=this.worksData[d]);return b},b.prototype.showWork=function(a){var b=a;k.attr("src",b.project_image),l.text(b.name),m.text(b.description),n.attr("href",b.url),h.show(),i.show(),v();var c=l.children().remove();Utils.spanText(l),l.append(c);var d=m.children().remove();Utils.spanText(m),m.append(d),q=new TimelineMax,q.from(h,1,{opacity:0,ease:Expo.easeOut}),q.from(i,1,{height:"0%",ease:Expo.easeOut},"-=0.8"),q.from(j,1,{opacity:0,ease:Expo.easeOut},"-=0.5"),q.from(k,1,{opacity:0,ease:Expo.easeOut},"-=1.0"),q.staggerFrom(l.find("span.a"),.3,{opacity:0,ease:Expo.easeOut},.05,"-=0.6"),q.staggerFrom(m.find("span.a"),.3,{opacity:0,ease:Expo.easeOut},.01,"-=0.4"),q.from(n,1,{opacity:0,ease:Expo.easeOut},"-=0.2"),j.on("click",t),h.on("click",t),o.on("click",t),p.on("click",t)};var t=function(a){if(a.preventDefault(),i.is(":visible")){var b=[n,m,l,k,j];r=new TimelineMax,r.to(b,1,{opacity:0,ease:Expo.easeOut}),r.to(i,1,{height:"0%",ease:Expo.easeOut},"-=0.6"),r.to(h,1,{opacity:0,ease:Expo.easeOut,onComplete:u},"-=0.6"),hasher.setHash("portfolio")}j.off("click",t),h.off("click",t),o.off("click",t),p.off("click",t)},u=function(){h.hide(),i.hide()},v=function(){h.css({opacity:1}),i.css({height:"100%"}),j.css({opacity:1}),k.css({opacity:1}),l.css({opacity:1}),m.css({opacity:1}),n.css({opacity:1})},w=function(){d=$("#portfolio"),e=$("#works"),h=$(".lightbox"),i=$(".project-view"),j=i.find(".close-project"),k=i.find(".project-img"),l=i.find("h3"),m=i.find("p"),n=i.find(".visit-project"),o=$("#topheader"),p=$("#pagefooter")};a.Portfolio=b}(window),function(a){function b(){}function c(){g.hide(),e=new Site,e.init()}function d(){f.hide(),TweenMax.to(g,.3,{opacity:0,onComplete:c})}var e,f,g,h,i=136,j=136,k="#e3030c",l=1.6,m=0,n=99.2,o=.5*i,p=2*Math.PI,q=Math.PI/2;b.prototype.init=function(){s(),h=new Raphael("preload_circle",i,j),TweenMax.ticker.addEventListener("tick",r),TweenMax.to(f,1,{opacity:0,delay:1,onComplete:d})};var r=function(){if(m>=n){m=n,h.clear();var a=h.circle(o,o,o);a.attr({fill:k,"stroke-width":0})}else{m+=l,h.clear();var b=p*m/100-q,c=Math.cos(b)*o+o,d=Math.sin(b)*o+o,e=50>=m?0:1,f="M"+o+","+o+" L"+o+",0 ";f+="A"+o+","+o+" 0 "+e+",1 "+c+","+d+" ",f+="L"+o+","+o+"Z";var g=h.path(f);g.attr({fill:k,"stroke-width":0})}},s=function(){g=$(".preload_bg"),f=g.find(".circle")};a.Preloader=b}(window),function(a){function b(){}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=[],r=96,s=96,t=1.6,u=.5*r,v=2*Math.PI,w=Math.PI/2,x=[{id:"html5_circle",color:"#f16529",startPercent:0,endPercent:99.2,paper:null},{id:"css3_circle",color:"#2c92d6",startPercent:0,endPercent:99.2,paper:null},{id:"js_circle",color:"#ff006c",startPercent:0,endPercent:99.2,paper:null},{id:"as3_circle",color:"#80ad3b",startPercent:0,endPercent:99.2,paper:null},{id:"fl_circle",color:"#e3030c",startPercent:0,endPercent:99.2,paper:null},{id:"php_circle",color:"#566fd8",startPercent:0,endPercent:99.2,paper:null},{id:"mysql_circle",color:"#0784aa",startPercent:0,endPercent:99.2,paper:null}];b.prototype.init=function(){H(),c.addClass("viewedSection"),q=[d,e,f],g.on("click",y),h.on("click",z);for(var a=0;a<q.length;a++){var b=q[a];b.removeClass("current_view"),b.hide()}A()};var y=function(a){a.preventDefault();for(var b,c,d=0;d<q.length;d++){var e=q[d];if(TweenMax.isTweening(e))return!1;e.hasClass("current_view")&&(b=e,c=0===d?q[q.length-1]:q[d-1])}switch(b.removeClass("current_view"),c.css({top:"-50%"}),c.addClass("current_view"),c.show(),TweenMax.to(b,1,{top:"150%",opacity:0,ease:Expo.easeOut}),TweenMax.to(c,1,{top:"50%",opacity:1,ease:Expo.easeOut}),c.attr("id")){case"overview":B(!0),F();break;case"specialties":C(!0);break;case"experience":D(!0),F()}},z=function(a){a.preventDefault();for(var b,c,d=0;d<q.length;d++){var e=q[d];if(TweenMax.isTweening(e))return!1;e.hasClass("current_view")&&(b=e,c=q.length-1===d?q[0]:q[d+1])}switch(b.removeClass("current_view"),c.css({top:"100%"}),c.addClass("current_view"),c.show(),TweenMax.to(b,1,{top:"-50%",opacity:0,ease:Expo.easeOut}),TweenMax.to(c,1,{top:"50%",opacity:1,ease:Expo.easeOut}),c.attr("id")){case"overview":B(!1),F();break;case"specialties":C(!1);break;case"experience":D(!1),F()}},A=function(){d.addClass("current_view"),d.show(),d.css({opacity:1,top:"50%"}),F();var a=d.find("p").first(),b=a.children().remove();Utils.spanText(a),a.append(b);var c=d.find("p").eq(1),e=c.children().remove();Utils.spanText(c),c.append(e);var f=new TimelineMax;f.from(j,1,{opacity:0,ease:Expo.easeOut}),f.from(i,1,{opacity:0,left:"-60px",ease:Expo.easeOut},"-=0.8"),f.staggerFrom(a.find("span.a"),.3,{opacity:0,ease:Expo.easeOut},.02,"-=0.8"),f.staggerFrom(c.find("span.a"),.3,{opacity:0,ease:Expo.easeOut},.02,"-=0.8")},B=function(a){a?(TweenMax.from(i,2,{top:"-40px",ease:Expo.easeOut}),TweenMax.from(j,2,{marginTop:"-60px",ease:Expo.easeOut}),TweenMax.from(d.find("p").first(),2,{marginTop:"-60px",ease:Expo.easeOut}),TweenMax.from(d.find("p").eq(1),2,{marginTop:"-80px",ease:Expo.easeOut})):(TweenMax.from(i,2,{top:"40px",ease:Expo.easeOut}),TweenMax.from(j,2,{marginTop:"60px",ease:Expo.easeOut}),TweenMax.from(d.find("p").first(),2,{marginTop:"60px",ease:Expo.easeOut}),TweenMax.from(d.find("p").eq(1),2,{marginTop:"80px",ease:Expo.easeOut}))},C=function(a){E(),TweenMax.ticker.addEventListener("tick",G),a?(TweenMax.from(n,2,{top:"-50px",ease:Expo.easeOut}),TweenMax.from(e.find(".special_slogan"),2,{top:"-70px",ease:Expo.easeOut}),TweenMax.from(e.find("h3").first(),2,{top:"-100px",ease:Expo.easeOut}),TweenMax.staggerFrom(e.find(".circle"),2,{marginTop:"-50px",ease:Expo.easeOut},.05)):(TweenMax.from(n,2,{top:"50px",ease:Expo.easeOut}),TweenMax.from(e.find(".special_slogan"),2,{top:"70px",ease:Expo.easeOut}),TweenMax.from(e.find("h3").first(),2,{top:"100px",ease:Expo.easeOut}),TweenMax.staggerFrom(e.find(".circle"),2,{marginTop:"50px",ease:Expo.easeOut},.05))},D=function(a){a?(TweenMax.from(k,2,{top:"-50px",ease:Expo.easeOut}),TweenMax.from(f.find("p").first(),2,{top:"-70px",ease:Expo.easeOut}),TweenMax.from(l.find(".circle").first(),2,{top:"-40px",ease:Expo.easeOut}),TweenMax.from(l.find("h4"),2,{top:"-30px",ease:Expo.easeOut}),TweenMax.from(l.find(".position"),2,{top:"-30px",ease:Expo.easeOut}),TweenMax.from(l.find(".timeframe"),2,{top:"-40px",ease:Expo.easeOut}),TweenMax.from(m.find(".circle").first(),2,{top:"-50px",ease:Expo.easeOut}),TweenMax.from(m.find("h4"),2,{top:"-40px",ease:Expo.easeOut}),TweenMax.from(m.find(".position"),2,{top:"-30px",ease:Expo.easeOut}),TweenMax.from(m.find(".timeframe"),2,{top:"-30px",ease:Expo.easeOut})):(TweenMax.from(k,2,{top:"50px",ease:Expo.easeOut}),TweenMax.from(f.find("p").first(),2,{top:"70px",ease:Expo.easeOut}),TweenMax.from(l.find(".circle").first(),2,{top:"40px",ease:Expo.easeOut}),TweenMax.from(l.find("h4"),2,{top:"30px",ease:Expo.easeOut}),TweenMax.from(l.find(".position"),2,{top:"30px",ease:Expo.easeOut}),TweenMax.from(l.find(".timeframe"),2,{top:"40px",ease:Expo.easeOut}),TweenMax.from(m.find(".circle").first(),2,{top:"50px",ease:Expo.easeOut}),TweenMax.from(m.find("h4"),2,{top:"40px",ease:Expo.easeOut}),TweenMax.from(m.find(".position"),2,{top:"30px",ease:Expo.easeOut}),TweenMax.from(m.find(".timeframe"),2,{top:"30px",ease:Expo.easeOut}))},E=function(){for(var a=0;a<x.length;a++){var b=x[a],c=new Raphael(b.id,r,s);b.paper=c}},F=function(){TweenMax.ticker.removeEventListener("tick",G);for(var a=0;a<x.length;a++){var b=x[a];b.paper&&(b.paper.remove(),b.paper=null),b.startPercent=0}},G=function(){for(var a=0;a<x.length;a++){var b=x[a];if(b.startPercent>=b.endPercent){b.startPercent=b.endPercent,b.paper.clear();var c=b.paper.circle(48,48,48);c.attr({fill:b.color,"stroke-width":0})}else{b.startPercent+=t,b.paper.clear();var d=v*b.startPercent/100-w,e=Math.cos(d)*u+u,f=Math.sin(d)*u+u,g=b.startPercent<=50?0:1,h="M"+u+","+u+" L"+u+",0 ";h+="A"+u+","+u+" 0 "+g+",1 "+e+","+f+" ",h+="L"+u+","+u+"Z";var i=b.paper.path(h);i.attr({fill:b.color,"stroke-width":0})}}},H=function(){c=$("#resume"),d=$("#overview"),e=$("#specialties"),f=$("#experience"),g=$(".up_arrow"),h=$(".down_arrow"),i=d.find(".title"),j=d.find(".circle").eq(0),k=f.find(".title"),l=$(".past_experience1"),m=$(".past_experience2"),n=e.find(".title"),o=$(".skills_row1"),p=$(".skills_row2")};a.Resume=b}(window),function(a){function b(){}var c,d,e,f,g,h,i,j,k,l,m;b.prototype.init=function(){c=this,s(),crossroads.addRoute("welcome"),crossroads.addRoute("portfolio"),crossroads.addRoute("portfolio/{slug}",p),crossroads.addRoute("contact"),crossroads.addRoute("resume"),hasher.changed.add(o),hasher.initialized.add(o),hasher.init(),TweenMax.to(e,.5,{top:"0px",ease:Power1.easeOut}),TweenMax.to(h,.5,{bottom:"0px",ease:Power1.easeOut}),i=new Social,i.init(),g.find("a").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).attr("href");hasher.setHash(b)}),g.find("a").on("mouseenter",function(){var a=$(this).next().find(".prog");TweenMax.to(a,.5,{width:"100%",ease:Expo.easeOut})}),g.find("a").on("mouseleave",function(){var a=$(this).next().find(".prog");TweenMax.to(a,.5,{width:"15%",ease:Expo.easeOut})}),f.on("click",function(a){a.preventDefault(),a.stopPropagation(),g.find("a").first().click()}),$('a[href^="http"]').on("click",function(){$(this).hasClass("social-link")||a.open($(this).attr("href"),"_blank")})};var n=function(a){g.find("li").removeClass("selected"),g.find("a").each(function(){var b=$(this).attr("href");b===a&&$(this).parent().addClass("selected")})},o=function(a){switch(crossroads.parse(a),a){case"":case"welcome":case"welcome/":q("welcome"),n("welcome");break;case"portfolio":case"portfolio/":$("#portfolio").hasClass("viewedSection")?e.click():(q("portfolio"),n("portfolio"));break;case"contact":case"contact/":q("contact"),n("contact");break;case"resume":case"resume/":q("resume"),n("resume");break;default:-1===a.indexOf("portfolio")?(q("welcome"),n("welcome")):/portfolio\/./.test(a)||(q("welcome"),n("welcome"))}},p=function(a){$("#portfolio").hasClass("viewedSection")||(r("portfolio"),n("portfolio"));var b=k.getWorkData(a);void 0!==b&&k.showWork(b)},q=function(a){var b=$(".viewedSection");0!==b.length?b.fadeOut("slow",function(){b.removeClass("viewedSection"),r(a)}):setTimeout(function(){r(a)},400)},r=function(a){switch(d.find("#"+a).show(),a){case"welcome":j=new Welcome,j.init();break;case"portfolio":k=new Portfolio,k.init();break;case"contact":l=new Contact,l.init();break;case"resume":m=new Resume,m.init()}},s=function(){d=$("#content"),e=$("#topheader"),f=$("#logo"),g=$("#main_nav"),h=$("#pagefooter")};a.Site=b}(window),function(a){function b(){}var c,d,e,f,g,h,i,j,k,l,m=!1,n=532,o=0;b.prototype.init=function(){w(),d.on("click",u),f.on("click",v),j.on("click",t),k.on("click",t),l.on("click",t),h.on("click",p),g.on("click",q),i.find("li").each(function(){o+=$(this).innerWidth()+3}),i.css({width:o,left:0})};var p=function(a){return a.preventDefault(),TweenMax.isTweening(i)?!1:(parseInt(i.css("left"),10)>-(parseInt(i.css("width"),10)-(n+50))?TweenMax.to(i,.5,{left:"-="+n,ease:Expo.easeOut}):TweenMax.to(i,.8,{left:0,ease:Expo.easeOut}),void 0)},q=function(a){return a.preventDefault(),TweenMax.isTweening(i)?!1:(parseInt(i.css("left"),10)<0?TweenMax.to(i,.5,{left:"+="+n,ease:Expo.easeOut}):TweenMax.to(i,.8,{left:-parseInt(i.css("width"),10)+n+38,ease:Expo.easeOut}),void 0)},r=function(){TweenMax.to(c,.7,{left:"0%",ease:Expo.easeOut})},s=function(){TweenMax.to(c,.7,{left:"100%",ease:Expo.easeOut})},t=function(a){a.preventDefault(),v(a)},u=function(a){a.preventDefault(),m||(r(),m=!0)},v=function(a){a.preventDefault(),m&&(s(),m=!1)},w=function(){c=$("#social"),d=$("#open_arrow"),e=d.find("img"),f=$(".social_close"),g=$(".left_arrow"),h=$(".right_arrow"),i=$(".social_feed"),j=$("#topheader"),k=$("#content"),l=$("#pagefooter")};a.Social=b}(window),function(a){function b(){}b.spanText=function(a){for(var b="",c=a.text(),d=0;d<c.length;d++){var e=c.charAt(d);b+='<span class="a">'+e+"</span>"}a.empty().append(b)},b.slug=function(a){var b=a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-");return b},b.getJSONData=function(){$.ajax({url:"php/portfolio.json",dataType:"JSON",method:"GET",success:function(a){Portfolio.prototype.worksData=a.works}})},a.Utils=b}(window),function(a){function b(){}var c,d,e,f,g;b.prototype.init=function(){h(),c.addClass("viewedSection"),d=c.find("h2").first();var a=d.children().remove();Utils.spanText(d),d.append(a),e=c.find("h2").eq(1);var b=e.children().remove();Utils.spanText(e),e.append(b),f=c.find("h3");var i=f.children().detach();Utils.spanText(f),f.append(i),g=new TimelineMax,g.staggerFrom(d.find("span.a"),.3,{opacity:0,ease:Expo.easeOut},.05),g.from(d.find("span.johnred"),.8,{opacity:0,ease:Expo.easeOut},"-=0.2"),g.staggerFrom(e.find("span.a"),.3,{opacity:0,ease:Expo.easeOut},.05,"-=0.8"),g.from(e.find("span.johnred"),.8,{opacity:0,ease:Expo.easeOut},"-=0.2"),g.staggerFrom(f.find("span.a"),.3,{opacity:0,ease:Expo.easeOut},.03,"-=0.8"),g.from(f.find("a.johnsquared"),.8,{opacity:0,ease:Expo.easeOut},"-=0.2")};var h=function(){c=$("#welcome")};a.Welcome=b}(window);